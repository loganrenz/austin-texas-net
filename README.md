# Austin-Texas.net

> Live local intelligence for Austin, Texas — built with **Nuxt 4**, **Nuxt UI 4**, and **Tailwind v4**.

## Quick Start

```bash
pnpm install
pnpm dev          # http://localhost:3000
pnpm build        # production build (Cloudflare Pages)
pnpm typecheck    # TypeScript validation
pnpm lint         # ESLint
```

## File Structure

```
app/
├── assets/css/main.css      # Tailwind v4 + Nuxt UI imports, theme tokens, keyframes
├── components/
│   ├── CategoryPage.vue      # Reusable category hub page
│   ├── HomeHero.vue          # Homepage hero section
│   ├── HomeExploreGrid.vue   # Category card grid
│   ├── HomeQuickChips.vue    # Quick-access navigation chips
├── composables/
│   ├── useAuth.ts            # Authentication state & helpers
│   ├── useLiveData.ts        # Generic live data fetching
│   ├── useLivePollen.ts      # Fetches /api/live/pollen
│   ├── useLiveWaterTemps.ts  # Fetches /api/live/water-temps
│   ├── usePageSeo.ts         # Per-page SEO meta helper
│   ├── useSiteData.ts        # Category structure & helper functions
│   └── useWeekendEvents.ts   # Fetches /api/live/events
├── pages/
│   ├── index.vue                    # Homepage
│   ├── login.vue                    # Login page
│   ├── [category]/index.vue         # Category hub (dynamic)
│   ├── [category]/[slug].vue        # Sub-page (dynamic)
│   ├── admin/radar.vue              # Admin Radar dashboard
│   └── allergies/cedar-pollen.vue   # Cedar pollen detail page
├── types/
│   └── live.ts               # Shared TypeScript types for live data
└── app.vue                   # Root layout (header, footer, navigation)

server/
├── api/
│   ├── auth/                 # Auth endpoints (login, signup, logout, refresh, me, Apple OAuth)
│   ├── live/                 # Live data (pollen, water-temps, events)
│   ├── pollen/               # Pollen data CRUD
│   ├── radar/                # Radar SEO endpoints (keywords, ingest, brief, queue, stats)
│   ├── health.get.ts         # Health check
│   └── sitemap-urls.ts       # Dynamic sitemap URL source
├── database/
│   ├── index.ts              # Drizzle instance export
│   └── schema.ts             # Database schema (users, pollen, radar keywords)
├── middleware/
│   └── auth.ts               # Server-side auth middleware
└── utils/
    ├── auth.ts               # JWT auth helpers
    ├── database.ts           # D1 database access
    ├── google-pollen.ts      # Google Pollen API client
    ├── kxan-scraper.ts       # KXAN weather data scraper
    ├── pollen.ts             # Pollen data processing
    ├── rateLimit.ts          # API rate limiting
    ├── requireAdmin.ts       # Admin route guard
    └── radar/                # Radar modules (autocomplete, classify, geo, intent, scoring, seeds)
```

## UI Rules

1. **Tailwind-First** — Use Tailwind v4 utilities and Nuxt UI components. No custom `<style>` blocks unless absolutely required.
2. **Nuxt UI Components** — Always prefer `UButton`, `UInput`, `UBadge`, `UIcon`, etc. over native HTML elements.
3. **No Raw Colors** — Use semantic tokens (`text-muted`, `text-default`, `bg-default`, `border-default`).
4. **Responsive** — All layouts must work from `320px` to `1440px`. Grid pattern: `grid-cols-1 md:grid-cols-3`.
5. **Icons** — Use Lucide icons via `i-lucide-*` prefix.
6. **Light-First** — Default to light theme. No dark hero sections. Bright, open aesthetic.

## How to Add a Page

### New Sub-Page

1. Create `app/pages/[category]/[slug].vue` or add content to the existing scaffold.
2. Ensure the sub-page's `slug` exists in `useSiteData()` category config.
3. Call `usePageSeo()` with unique `title` and `description`.
4. Call `useSchemaOrg()` for structured data.

### New Category

1. Add the category to `useSiteData.ts` with `title`, `slug`, `icon`, `color`, `tagline`, and `subApps[]`.
2. The dynamic `[category]/index.vue` route handles it automatically.
3. New categories require Radar-backed demand validation.

### New Live Data Source

1. Create a server API endpoint: `server/api/live/<name>.get.ts`
2. Create a composable: `app/composables/useLive<Name>.ts` with typed `useFetch<T>`
3. Add types to `app/types/live.ts`

## SEO Checklist

- [ ] One `<h1>` per page
- [ ] Unique `<title>` via `usePageSeo()`
- [ ] Unique `<meta name="description">` via `usePageSeo()`
- [ ] Canonical URL set automatically by Nuxt
- [ ] Schema.org structured data via `useSchemaOrg()`
- [ ] All URLs end with trailing slash
- [ ] Sitemap generated by `@nuxtjs/sitemap`
- [ ] Robots.txt managed by `@nuxtjs/robots`

## Tooling

| Tool        | Config                           | Purpose                         |
| ----------- | -------------------------------- | ------------------------------- |
| ESLint      | `eslint.config.mjs`              | Linting via `@nuxt/eslint`      |
| Prettier    | `.prettierrc`                    | Code formatting                 |
| Husky       | `.husky/pre-commit`              | Git hooks                       |
| lint-staged | `.lintstagedrc`                  | Run lint/format on staged files |
| CI          | `.github/workflows/ci.yml`       | Lint + typecheck on PRs         |
| TypeScript  | `tsconfig.json` (Nuxt-generated) | Type safety                     |

## Deployment

```bash
pnpm deploy  # Build → patch → deploy to Cloudflare Pages
```

Target: **Cloudflare Pages** via `nitro.preset: 'cloudflare-pages'`
