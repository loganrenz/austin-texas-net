/**
 * GET /api/geo/texas-outline
 *
 * Returns a simplified GeoJSON Feature with the Texas state boundary polygon.
 * Used by AppMapKit's `texasMask` prop to draw an inverted overlay that dims
 * everything outside Texas.
 *
 * The coordinates are inlined to avoid Nitro storage lookups that fail on
 * Cloudflare Workers. The data is only ~3 KB (152 vertices).
 */

const TEXAS_GEOJSON = {
  type: 'Feature',
  properties: { name: 'Texas' },
  geometry: {
    type: 'Polygon',
    coordinates: [
      [
        [-101.8129, 36.5019],
        [-100.0001, 36.5019],
        [-100.0001, 34.563],
        [-99.9234, 34.574],
        [-99.6988, 34.3823],
        [-99.5783, 34.4151],
        [-99.2607, 34.4042],
        [-99.1895, 34.2125],
        [-98.9868, 34.2235],
        [-98.7678, 34.1358],
        [-98.5706, 34.1468],
        [-98.4884, 34.0646],
        [-98.3625, 34.1577],
        [-98.1708, 34.1139],
        [-98.0886, 34.0044],
        [-97.9462, 33.9879],
        [-97.8695, 33.851],
        [-97.6943, 33.9825],
        [-97.4588, 33.9058],
        [-97.3711, 33.8236],
        [-97.2561, 33.862],
        [-97.174, 33.736],
        [-96.922, 33.9606],
        [-96.8508, 33.8455],
        [-96.6318, 33.8455],
        [-96.4236, 33.7743],
        [-96.347, 33.6867],
        [-96.1498, 33.8401],
        [-95.9362, 33.8894],
        [-95.8376, 33.8346],
        [-95.6021, 33.9332],
        [-95.5473, 33.8784],
        [-95.2899, 33.8729],
        [-95.2242, 33.9606],
        [-94.9668, 33.862],
        [-94.8682, 33.747],
        [-94.4848, 33.6374],
        [-94.3807, 33.5443],
        [-94.1836, 33.5936],
        [-94.0412, 33.5498],
        [-94.0412, 33.0185],
        [-94.0412, 31.9943],
        [-93.8221, 31.7753],
        [-93.8166, 31.5562],
        [-93.5428, 31.1509],
        [-93.5263, 30.9373],
        [-93.6304, 30.6799],
        [-93.729, 30.5758],
        [-93.6961, 30.4389],
        [-93.7673, 30.3348],
        [-93.6906, 30.1431],
        [-93.9261, 29.7871],
        [-93.8385, 29.6885],
        [-94.0028, 29.6831],
        [-94.5231, 29.5461],
        [-94.7093, 29.6228],
        [-94.7422, 29.7871],
        [-94.8737, 29.6721],
        [-94.9668, 29.6995],
        [-95.0161, 29.5571],
        [-94.912, 29.4969],
        [-94.8956, 29.3106],
        [-95.0818, 29.1135],
        [-95.383, 28.867],
        [-95.9855, 28.6041],
        [-96.0457, 28.6479],
        [-96.2265, 28.5822],
        [-96.2319, 28.6425],
        [-96.4784, 28.5986],
        [-96.5934, 28.7246],
        [-96.6646, 28.6972],
        [-96.4017, 28.4398],
        [-96.5934, 28.3577],
        [-96.7742, 28.4069],
        [-96.8015, 28.2262],
        [-97.0261, 28.04],
        [-97.2561, 27.6949],
        [-97.404, 27.3335],
        [-97.5135, 27.3608],
        [-97.5409, 27.2294],
        [-97.4259, 27.2623],
        [-97.4807, 26.9994],
        [-97.5574, 26.9884],
        [-97.5628, 26.8405],
        [-97.4697, 26.7584],
        [-97.4423, 26.4572],
        [-97.3328, 26.3531],
        [-97.3054, 26.1614],
        [-97.2178, 25.9916],
        [-97.5245, 25.8876],
        [-97.6505, 26.019],
        [-97.886, 26.0683],
        [-98.1982, 26.0573],
        [-98.4665, 26.2216],
        [-98.6692, 26.2381],
        [-98.8225, 26.3695],
        [-99.0307, 26.4133],
        [-99.1731, 26.5393],
        [-99.2662, 26.8405],
        [-99.4469, 27.0213],
        [-99.425, 27.1746],
        [-99.5071, 27.3389],
        [-99.4798, 27.4813],
        [-99.6057, 27.6402],
        [-99.7098, 27.6566],
        [-99.8796, 27.799],
        [-99.9344, 27.9797],
        [-100.0822, 28.1441],
        [-100.2958, 28.281],
        [-100.3999, 28.5822],
        [-100.4985, 28.6644],
        [-100.6299, 28.9053],
        [-100.6737, 29.1025],
        [-100.7997, 29.2449],
        [-101.0133, 29.3709],
        [-101.0626, 29.4585],
        [-101.2598, 29.5352],
        [-101.4131, 29.7543],
        [-101.8513, 29.8036],
        [-102.1142, 29.7926],
        [-102.3387, 29.8693],
        [-102.388, 29.7652],
        [-102.629, 29.7324],
        [-102.8097, 29.5242],
        [-102.9193, 29.1901],
        [-102.9795, 29.1847],
        [-103.1165, 28.9875],
        [-103.2808, 28.982],
        [-103.5272, 29.1354],
        [-104.1461, 29.3818],
        [-104.2666, 29.5133],
        [-104.5076, 29.6393],
        [-104.6774, 29.9241],
        [-104.6883, 30.1815],
        [-104.8581, 30.3896],
        [-104.8965, 30.5703],
        [-105.006, 30.6854],
        [-105.3949, 30.8551],
        [-105.603, 31.0852],
        [-105.7728, 31.1673],
        [-105.9535, 31.3645],
        [-106.2054, 31.4686],
        [-106.3807, 31.7314],
        [-106.5286, 31.7862],
        [-106.6436, 31.9012],
        [-106.6162, 31.9998],
        [-103.0672, 31.9998],
        [-103.0672, 33.0021],
        [-103.0453, 34.0153],
        [-103.0398, 36.5019],
        [-103.0014, 36.5019],
        [-101.8129, 36.5019],
      ],
    ],
  },
} as const

export default defineEventHandler((event) => {
  setResponseHeader(event, 'Cache-Control', 'public, max-age=604800, immutable')
  setResponseHeader(event, 'Content-Type', 'application/geo+json')
  return TEXAS_GEOJSON
})
